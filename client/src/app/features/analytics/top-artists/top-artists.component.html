<div class="page-container">
  <!-- Hero Header -->
  <div class="page-header">
    <div class="header-content">
      <h1>Top 5 Artists</h1>
      <p class="subtitle">Ranking the highest-grossing performers on the platform.</p>
      
      <button (click)="refreshData()" class="btn-refresh" [disabled]="loading">
        {{ loading ? 'Updating...' : 'Refresh Ranking' }}
      </button>
    </div>
  </div>

  @if (loading) {
    <div class="loading-state">
      <p>Calculating rankings...</p>
    </div>
  } @else {
    <div class="content-wrapper">
      <div class="card table-card">
        <div class="table-responsive">
          <table>
            <thead>
              <tr>
                <th class="text-center">Rank</th>
                <th>Artist Profile</th>
                <th class="text-right">Gross Sales</th>
                <th>Most Popular At</th>
              </tr>
            </thead>
            <tbody>
              @for (artist of topArtists; track artist._id; let i = $index) {
                <tr class="ranking-row">
                  <td class="rank-cell">
                    <div class="rank-badge" [ngClass]="'rank-' + (i + 1)">{{ i + 1 }}</div>
                  </td>
                  <td class="artist-cell">
                    <a [routerLink]="['/artists', artist._id]" class="artist-link">
                      <div class="avatar-wrapper">
                        <img [src]="artist.imageUrl || 'https://via.placeholder.com/100'" alt="{{ artist.artistName }}">
                      </div>
                      <span class="artist-name">{{ artist.artistName }}</span>
                    </a>
                  </td>
                  <td class="sales-cell text-right">
                    {{ artist.grossSales | currency:'USD':'symbol':'1.0-0' }}
                  </td>
                  <td class="venue-cell">
                    <div class="venue-name">{{ artist.favoriteVenue.name }}</div>
                    <div class="venue-location">{{ artist.favoriteVenue.city }}, {{ artist.favoriteVenue.state }}</div>
                  </td>
                </tr>
              } @empty {
                <tr>
                  <td colspan="4" class="empty-state">No sales data available yet.</td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
    </div>
  }
</div>

<style>
  .btn-refresh {
    margin-top: 1rem;
    padding: 0.6rem 1.2rem;
    background-color: var(--accent-color);
    color: white;
    border: none;
    border-radius: 4px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.2s;
  }
  .btn-refresh:hover {
    background-color: var(--accent-hover-color);
  }
  .btn-refresh:disabled {
    background-color: var(--border-color);
    cursor: not-allowed;
  }
</style>